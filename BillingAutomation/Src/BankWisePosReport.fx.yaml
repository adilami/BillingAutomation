BankWisePosReport As screen:

    btnSync As button:
        OnSelect: |+
            =
            RemoveIf(
                tbl_BankWisePOSReports,
                true
            );
            Set(
                BankData,
                BankWisePOSReportsFlow.Run()
            );
            Set(
                parsedData,
                ParseJSON(BankData.output)
            );
            Set(
                parsedRetrieveData,
                ParseJSON(BankData.outputretrieveterminal)
            );
            ClearCollect(
                colBankData,
                ForAll(
                    Table(parsedData),
                    {
                        bankName: Text(Value.bankName),
                        POSType: Text(Value.shortName),
                        deployDate: Text(Value.deployDate)
                    }
                )
            );
            ClearCollect(colCountedBank, AddColumns(GroupBy(colBankData, "bankName", "Group"), "Count", CountRows(Group)));
            
            
            ForAll(
                colCountedBank,
                Patch(
                    tbl_BankWisePOSReports,
                    Defaults(tbl_BankWisePOSReports),
                    {
                        BankName:Text(ThisRecord.bankName),
                        Count:Value(ThisRecord.Count)
                    }
                )
            );
            Notify("Synced Successfully",NotificationType.Success);
            
        Text: ="Sync Deploy"
        X: =416
        Y: =646
        ZIndex: =2

    galBankWisePosReport As gallery.galleryVertical:
        DelayItemLoading: =true
        Height: =375
        Items: =tbl_BankWisePOSReports
        Layout: =Layout.Vertical
        LoadingSpinner: =LoadingSpinner.Data
        TemplateSize: =76
        Width: =596
        Y: =85
        ZIndex: =6

        lblBankNameContent As label:
            Align: =Align.Center
            OnSelect: =Select(Parent)
            Text: =ThisItem.BankName
            Width: =215
            X: =2
            Y: =20
            ZIndex: =2

        lblTerminalTypeContent As label:
            Align: =Align.Center
            OnSelect: =Select(Parent)
            Text: =ThisItem.Count
            Width: =125
            X: =217
            Y: =20
            ZIndex: =3

        lblTerminalTypeContent_1 As label:
            Align: =Align.Center
            OnSelect: =Select(Parent)
            Text: =ThisItem.Count*900
            Width: =125
            X: =422
            Y: =20
            ZIndex: =4

    dteDateFrom As datepicker:
        X: =92
        Y: =572
        ZIndex: =7

    dteDateTo As datepicker:
        X: =471
        Y: =572
        ZIndex: =8

    lblDateFrom As label:
        Text: ="Date from"
        X: =92
        Y: =532
        ZIndex: =9

    lblDateTo As label:
        Text: |-
            ="Date to
            "
        X: =471
        Y: =532
        ZIndex: =10

    recHeader As rectangle:
        Height: =85
        Width: =1366
        ZIndex: =11

    lblBankName As label:
        Align: =Align.Center
        Color: =RGBA(255, 255, 255, 1)
        FontWeight: =FontWeight.Bold
        Size: =18
        Text: ="Bank Name"
        X: =16
        Y: =22
        ZIndex: =12

    lblTerminalType As label:
        Align: =Align.Center
        Color: =RGBA(255, 255, 255, 1)
        FontWeight: =FontWeight.Bold
        Size: =18
        Text: |-
            ="Total Terminals
            "
        Width: =200
        X: =196
        Y: =22
        ZIndex: =13

    lblTerminalType_1 As label:
        Align: =Align.Center
        Color: =RGBA(255, 255, 255, 1)
        FontWeight: =FontWeight.Bold
        Size: =18
        Text: ="Total Price"
        Width: =200
        X: =396
        Y: =22
        ZIndex: =14

    lblBankName_1 As label:
        Align: =Align.Center
        Color: =RGBA(255, 255, 255, 1)
        FontWeight: =FontWeight.Bold
        Size: =18
        Text: ="Bank Name"
        X: =649
        Y: =22
        ZIndex: =15

    lblTerminalType_2 As label:
        Align: =Align.Center
        Color: =RGBA(255, 255, 255, 1)
        FontWeight: =FontWeight.Bold
        Size: =18
        Text: ="Terminal Type"
        Width: =200
        X: =859
        Y: =22
        ZIndex: =16

    lblTerminalType_3 As label:
        Align: =Align.Center
        Color: =RGBA(255, 255, 255, 1)
        FontWeight: =FontWeight.Bold
        Size: =18
        Text: ="Retrieve Date"
        Width: =200
        X: =1149
        Y: =22
        ZIndex: =17

    Gallery1 As gallery.galleryVertical:
        DelayItemLoading: =true
        Height: =318
        Items: |-
            =Filter(
                tbl_RetrieveTerminals,
                RetrieveDate >= dteDateFrom.SelectedDate && RetrieveDate<= dteDateTo.SelectedDate
            )
        Layout: =Layout.Vertical
        LoadingSpinner: =LoadingSpinner.Data
        TemplateSize: =72
        Width: =755
        X: =611
        Y: =84
        ZIndex: =18

        Label1 As label:
            Height: =60
            OnSelect: =Select(Parent)
            Text: =ThisItem.RetrieveDate
            Width: =212
            X: =532
            ZIndex: =1

        Label2 As label:
            Height: =52
            OnSelect: =Select(Parent)
            Text: =ThisItem.BankId
            Width: =190
            X: =7
            Y: =8
            ZIndex: =2

    btnSyncRetrieve As button:
        OnSelect: |-
            =RemoveIf(
                tbl_RetrieveTerminals,
                true
            );
            Set(
                parsedRetrieveData,
                ParseJSON(BankData.outputretrieveterminal)
            );
            ClearCollect(
                colRetrieveData,
                ForAll(
                    Table(parsedRetrieveData),
                    {
                        bankID: Text(Value.bankId),
                        updatedDate: Text(Value.updatedDate)
                    }
                )
            );
            ForAll(
                colRetrieveData,
                Patch(
                    tbl_RetrieveTerminals,
                    Defaults(tbl_RetrieveTerminals),
                    {
                        BankId: Text(ThisRecord.bankID),
                        RetrieveDate: DateValue(ThisRecord.updatedDate)
                    }
                )
            );
        Text: ="Sync Retrieve"
        X: =912
        Y: =652
        ZIndex: =19

